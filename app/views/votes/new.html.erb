<h1>Ballot</h1>
<style>
.fa-question-circle:hover {
	-webkit-transform: scale(1.2);
}

.fa-question-circle {  
  transition: font-size 0.35s ease; 
}

.navbar-static-top {
  display: none;
}
.footer {
  display: none;
}
</style>

<script>
function confirmVote() {
  if (!userVoted()) {
    alert('Please make at least one vote.');
    return false;
  }
  return confirm('Are you sure you want to vote for:\n' + gatherVotes()) ;
}

function userVoted() {
  return $('input:radio:checked').length > 0;
}

function gatherVotes() {
  var message = "";
  $.each($('input:radio:checked'), function( index, value ) {
    message = message + $(value).parent().text().trim() + "\n ";
  });
  return message;
}
</script>

<%= form_tag votes_path, onsubmit: "return confirmVote();" do %>
  <%= hidden_field_tag 'voter_id', @voter.id %>
  <h1>National Issues</h1>
  <% @national_issues.each do |issue| %>
    <%= fields_for "issue[]", issue do |f| %>
      <div class="row">
        <div class="col-md-12">
          <h2>
            <%= issue.title %>
            <%= link_to issue_path(issue) do %>
              <i class="fa fa-question-circle"></i>
            <% end %>
          </h2>
        </div>
      </div>
    <% end %>
      <div class="row">
        <% issue.choices.each do |choice| %>
          <div class="col-md-3">
            <strong>
              <%= radio_button_tag "issue[#{issue.id}]", choice.id %> 
              <%= choice.title %>
            </strong>
          </div>
        <% end %>
        <div class="col-md-3">
          <strong>
            <%= radio_button_tag "issue[#{issue.id}]", '' %> 
            None
          </strong>
        </div>
      </div>
      <br>
      <%= check_box 'understand_this', issue.id %> I understand
      <br>
      <%= check_box 'care_about_this', issue.id %> I care about this
  <% end %>
  <br>
  <br>
  <h1>State Issues</h1>
  <% @state_issues.each do |issue| %>
    <%= fields_for "issue[]", issue do |f| %>
      <div class="row">
        <div class="col-md-12">
          <h2>
            <%= issue.title %>
            <%= link_to issue_path(issue) do %>
              <i class="fa fa-question-circle"></i>
            <% end %>
          </h2>
        </div>
      </div>
    <% end %>
      <div class="row">
        <% issue.choices.each do |choice| %>
          <div class="col-md-3">
            <strong>
              <%= radio_button_tag "issue[#{issue.id}]", choice.id %> 
              <%= choice.title %>
            </strong>
          </div>
        <% end %>
        <div class="col-md-3">
          <strong>
            <%= radio_button_tag "issue[#{issue.id}]", '' %> 
            None
          </strong>
        </div>
      </div>
      <br>
      <%= check_box 'understand_this', issue.id %> I understand
      <br>
      <%= check_box 'care_about_this', issue.id %> I care about this
  <% end %>
  <br>
  <br>
  <%= submit_tag "Submit Vote", class: "btn btn-default" %>
  
  <%= link_to 'Redirect to Sample Ballot', ballots_path %>
  
<% end %>